import{M as t}from"./modal.cf52bcef.js";import{H as a,o as e,c as l,f as s,l as o,I as d,M as i,g as c}from"./vendor.0c547ad4.js";const r={props:["product","isNew"],emits:["get-data"],data:()=>({modal:"",tempProduct:{}}),watch:{product(){this.tempProduct=JSON.parse(JSON.stringify(this.product))}},mounted(){this.modal=new t(this.$refs.productModal,{keyboard:!1,backdrop:"static"})},methods:{updateProduct(){let t=`${{}.VUE_APP_API}/v2/api/${{}.VUE_APP_PATH}/admin/product`,a="post";this.isNew||(t=`${{}.VUE_APP_API}/v2/api/${{}.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`,a="put",console.log(t)),this.$http[a](t,{data:this.tempProduct}).then((t=>{alert(t.data.message),this.$emit("get-data"),this.modal.hide()})).catch((t=>{alert(t.data.message)}))},openModal(){this.modal.show()},hideModal(){this.modal.hide()},upload(t,e){if("main"==t){const t=e.target.files[0],l=new FormData;l.append("imgSingle",t),this.$http.post("http://apilan.news-age.tw/imgUpload/",l).then((t=>{this.tempProduct.imageRec=t.data,this.$refs.pathClear.value="",console.log("16比9",t.data),a.success("上傳圖片成功")})).catch((t=>{console.dir(t)}))}else if("main2"==t){const t=e.target.files[0],l=new FormData;l.append("imgSingle",t),this.$http.post("http://apilan.news-age.tw/imgUpload/",l).then((t=>{this.tempProduct.imageSqu=t.data,this.$refs.pathClear.value="",console.log("1比1",t.data),a.success("上傳圖片成功")})).catch((t=>{console.dir(t)}))}},formDate:t=>t.split("T")[0]}},n={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},m={class:"modal-dialog modal-xl"},p={class:"modal-content border-0"},u={id:"productModalLabel",class:"modal-title text-center"},b={key:0},h={key:1,style:{color:"#000"}},g=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),f={class:"modal-body"},P={class:"row"},y={class:"col-sm-4"},v={class:"mb-3"},w=s("label",{for:"uploadImg",class:"form-label"},[c("新增圖片"),s("span",{class:"btn-danger ms-2 pt-1 pb-1 pe-1 ps-1"},"請上傳800x450 (px)")],-1),x={class:"mb-3"},$=s("label",{for:"uploadImg",class:"form-label"},[c("新增圖片"),s("span",{class:"btn-danger ms-2 pt-1 pb-1 pe-1 ps-1"},"請上傳400x400 (px)")],-1),k={class:"col-sm-8"},C={class:"form-floating mb-3"},M=s("label",{for:"title",class:"form-label"},"標題",-1),_=s("hr",null,null,-1),A={class:"mb-3"},S={class:"form-floating"},U=s("label",{for:"description",class:"form-label"},"簡短描述文",-1),I={class:"modal-footer"},N=s("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);r.render=function(t,a,c,r,V,q){return e(),l("div",n,[s("div",m,[s("div",p,[s("div",{class:[c.isNew?"bg-primary":"bg-warning","modal-header text-white"]},[s("h5",u,[c.isNew?(e(),l("span",b,"新增文章")):(e(),l("span",h,"編輯文章"))]),g],2),s("div",f,[s("div",P,[s("div",y,[s("div",v,[w,s("input",{type:"file",class:"form-control mb-3",id:"uploadImg",ref:"pathClear",onChange:a[1]||(a[1]=t=>q.upload("main",t))},null,544),s("img",{class:"img-fluid mb-3",src:V.tempProduct.imageRec},null,8,["src"]),V.tempProduct.imageRec?(e(),l("button",{key:0,class:"btn btn-outline-danger btn-sm d-block w-100",onClick:a[2]||(a[2]=t=>V.tempProduct.imageRec="")}," 刪除檔案 ")):o("",!0)]),s("div",x,[$,s("input",{type:"file",class:"form-control mb-3",id:"uploadImg",ref:"pathClear",onChange:a[3]||(a[3]=t=>q.upload("main2",t))},null,544),s("img",{class:"img-fluid mb-3",src:V.tempProduct.imageSqu},null,8,["src"]),V.tempProduct.imageSqu?(e(),l("button",{key:0,class:"btn btn-outline-danger btn-sm d-block w-100",onClick:a[4]||(a[4]=t=>V.tempProduct.imageSqu="")}," 刪除檔案 ")):o("",!0)])]),s("div",k,[s("div",C,[d(s("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":a[5]||(a[5]=t=>V.tempProduct.title=t)},null,512),[[i,V.tempProduct.title]]),M]),_,s("div",A,[s("div",S,[d(s("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入簡短敘述文","onUpdate:modelValue":a[6]||(a[6]=t=>V.tempProduct.subtext=t),style:{height:"150px"}},null,512),[[i,V.tempProduct.subtext]]),U])])])])]),s("div",I,[N,s("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:a[7]||(a[7]=(...t)=>q.updateProduct&&q.updateProduct(...t))}," 確認 ")])])])],512)};export{r as _};
