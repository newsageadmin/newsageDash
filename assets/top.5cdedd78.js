var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(e,o,s)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,a=(t,a)=>{for(var i in a||(a={}))o.call(a,i)&&l(t,i,a[i]);if(e)for(var i of e(a))s.call(a,i)&&l(t,i,a[i]);return t};import{_ as i}from"./topModal.92ce5add.js";import{r as d,o as r,c,f as n,k as p,F as u,i as h,I as m,J as f,t as g,g as w}from"./vendor.0c547ad4.js";import"./modal.cf52bcef.js";import"./ckeditor.1e16c881.js";const b={data:()=>({isLoading:!1,products:[],url:"https://api.news-age.tw",tempProduct:{imagesUrl:[]},isNew:!1}),methods:{getTopList(){this.isLoading=!0,this.$http(`${this.url}/getData/front/話題`).then((t=>{setTimeout((()=>{this.isLoading=!1}),1e3),this.products=t.data,this.products.length=10,console.log(this.products)})).catch((t=>{console.log(t)}))},openModal(t,e){"add"===t?(this.tempProduct={chId:2,chStatus:1},this.isNew=!0,this.$refs.productModal.openModal()):"edit"===t&&(this.tempProduct=a({},e),this.isNew=!1,this.$refs.productModal.openModal())},delItem(t){this.tempProduct=a({},t);let e=`https://api.news-age.tw/chBn/delete/${this.tempProduct.id}`;confirm(`下架（${this.tempProduct.title}）?`)?(this.tempProduct.deleteStatus=1,this.$http.put(e,this.tempProduct).then((t=>{console.log("回傳",t.data),alert("刪除文章成功"),this.getTopList()}))):alert("你按了取消按鈕")}},components:{ProductModal:i},mounted(){this.getTopList()}},y=n("div",{class:"text-center mt-3 mb-3"},[n("h2",null,"話題-大版頭列表")],-1),P={class:"container-fluid"},v={class:"text-end mt-4"},M=w(" 建立新的文章 "),L={class:"table"},j=n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"text-center"},"ID"),n("th",{scope:"col"},"圖片"),n("th",{scope:"col"},"標題"),n("th",{scope:"col"})])],-1),k={scope:"row",class:"text-center"},$={width:"350"},I={width:"50"},O=w("編輯"),x={width:"50"},C=w("刪除");b.render=function(t,e,o,s,l,a){const i=d("Loading"),w=d("el-button"),b=d("product-modal");return r(),c("div",null,[n(i,{active:l.isLoading},null,8,["active"]),y,n("div",P,[n("div",v,[n(w,{type:"primary",onClick:e[1]||(e[1]=t=>a.openModal("add"))},{default:p((()=>[M])),_:1})]),n("table",L,[j,n("tbody",null,[(r(!0),c(u,null,h(l.products,(t=>m((r(),c("tr",{key:t.id},[n("th",k,g(t.id),1),n("td",$,[n("img",{src:t.chFront,class:"img-fluid"},null,8,["src"])]),n("td",null,g(t.title),1),n("td",I,[n(w,{plain:"",type:"primary",onClick:e=>a.openModal("edit",t)},{default:p((()=>[O])),_:2},1032,["onClick"])]),n("td",x,[n(w,{plain:"",type:"danger",onClick:e=>a.delItem(t)},{default:p((()=>[C])),_:2},1032,["onClick"])])],512)),[[f,null!==t.chFront]]))),128))])])]),n(b,{ref:"productModal",product:l.tempProduct,"is-new":l.isNew,onGetData:a.getTopList},null,8,["product","is-new","onGetData"])])};export default b;
