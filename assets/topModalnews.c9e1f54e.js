import{M as t}from"./modal.cf52bcef.js";import{o as a,c as e,f as o,I as s,M as l}from"./vendor.0c547ad4.js";const d={props:["product","isNew"],emits:["get-data"],data:()=>({modal:"",tempProduct:{}}),watch:{product(){this.tempProduct=JSON.parse(JSON.stringify(this.product))}},mounted(){this.modal=new t(this.$refs.productModal,{keyboard:!1,backdrop:"static"})},methods:{updateProduct(){let t=`${{}.VUE_APP_API}/v2/api/${{}.VUE_APP_PATH}/admin/product`,a="post";this.isNew||(t=`${{}.VUE_APP_API}/v2/api/${{}.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`,a="put",console.log(t)),this.$http[a](t,{data:this.tempProduct}).then((t=>{alert(t.data.message),this.$emit("get-data"),this.modal.hide()})).catch((t=>{alert(t.data.message)}))},openModal(){this.modal.show()},hideModal(){this.modal.hide()},upload(t,a){console.dir(a);const e=a.target.files[0],o=new FormData;o.append("file-to-upload",e),this.$http.post(`${{}.VUE_APP_API}/v2/api/${{}.VUE_APP_PATH}/admin/upload`,o).then((a=>{"main"===t?(this.tempProduct.imageUrl=a.data.imageUrl,this.$refs.pathClear.value=""):"sub"!==t||Array.isArray(this.tempProduct.imagesUrl)?"sub"===t&&Array.isArray(this.tempProduct.imagesUrl)&&(console.log("b",a.data.imageUrl),this.tempProduct.imagesUrl.push(a.data.imageUrl),this.$refs.pathesClear.value=""):(this.tempProduct.imagesUrl=[],console.log("a",a.data.imageUrl),this.tempProduct.imagesUrl.push(a.data.imageUrl),this.$refs.pathesClear.value="")})).catch((t=>{console.log(t)}))}}},i={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},r={class:"modal-dialog modal-xl"},c={class:"modal-content border-0"},m={id:"productModalLabel",class:"modal-title text-center"},p={key:0},u={key:1,style:{color:"#000"}},n=o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),h={class:"modal-body"},b={class:"row"},P={class:"col-sm-12"},g={class:"form-floating mb-3"},f=o("label",{for:"title",class:"form-label"},"文章ID(需要和文章對應)",-1),y={class:"form-floating mb-3"},U=o("label",{for:"title",class:"form-label"},"標題1",-1),v={class:"modal-footer"},_=o("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);d.render=function(t,d,A,$,w,M){return a(),e("div",i,[o("div",r,[o("div",c,[o("div",{class:[A.isNew?"bg-primary":"bg-warning","modal-header text-white"]},[o("h5",m,[A.isNew?(a(),e("span",p,"新增文章")):(a(),e("span",u,"編輯文章"))]),n],2),o("div",h,[o("div",b,[o("div",P,[o("div",g,[s(o("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入ID","onUpdate:modelValue":d[1]||(d[1]=t=>w.tempProduct.hot_id=t)},null,512),[[l,w.tempProduct.hot_id]]),f]),o("div",y,[s(o("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":d[2]||(d[2]=t=>w.tempProduct.hot_title=t)},null,512),[[l,w.tempProduct.hot_title]]),U])])])]),o("div",v,[_,o("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:d[3]||(d[3]=(...t)=>M.updateProduct&&M.updateProduct(...t))}," 確認 ")])])])],512)};export{d as _};
